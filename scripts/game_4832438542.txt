local addons = {}

local function load(Tab)
	local _1 = false

	local Players = game:GetService("Players")
	local ReplicatedStorage = game:GetService("ReplicatedStorage")

	local player = Players.LocalPlayer
	local pinchRemote = ReplicatedStorage.COM.Pinch.LetMeGo

	local function setupCharacter(char)
		local function onchar()
			if char:GetAttribute("Grabbed") and _1 then
				pinchRemote:FireServer()
			end
		end

		char:GetAttributeChangedSignal("Grabbed"):Connect(onchar)
		onchar()
	end

	if player.Character then
		setupCharacter(player.Character)
	end

	player.CharacterAdded:Connect(setupCharacter)
	
	Tab:CreateToggle({
		Name = "Anti Grab",
		CurrentValue = false,
		Flag = tostring(game.PlaceId) .. "/AntiGrab", -- A flag is the identifier for the configuration file, make sure every element has a different flag if you're using configuration saving to ensure no overlaps
		Callback = function(Value)
			_1 = Value
		end,
	})
end

addons.Load = load
return addons
